!(({languages, hooks}) => {
  (languages.ejs = {
    delimiter: { pattern: /^<%[-_=]?|[-_]?%>$/, alias: "punctuation" },
    comment: /^#[\s\S]*/,
    "language-javascript": {
      pattern: /[\s\S]+/,
      inside: languages.javascript,
    },
  }),
    hooks.add("before-tokenize", a => {
      languages["markup-templating"].buildPlaceholders(
        a,
        "ejs",
        /<%(?!%)[\s\S]+?%>/g
      );
    }),
    hooks.add("after-tokenize", a => {
      languages["markup-templating"].tokenizePlaceholders(a, "ejs");
    }),
    (languages.eta = languages.ejs);
})(Prism);
